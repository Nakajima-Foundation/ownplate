# 通知設定の仕様

- Japan-only specifications
- このドキュメントは、おもちかえり.com通知機能についての仕様メモです。
- ドキュメント類の反映順序
  - Github → マニュアル → その他のドキュメント

## 飲食店側へ送る通知

飲食店側で、メール、電話、LINEの受信設定がそれぞれ必要です。
受信設定しているものには、すべて送られます。

以下のタイミングで通知を送ります。
- 注文を受信した時
- お客さんからキャンセルされた時

注文を受信したときに、ブラウザー上で通知音を鳴らすこともできます。

## お客さんへ送る通知

以下の条件・状態の時に通知を送ります。

- お店が注文を「受付済み」(order_accepted)のステータスに変更した時）
  - LINEに送る
  - SMSへ送らない
- お店が注文を「受け渡し準備完了」(ready_to_pickup)のステータスに変更した時
  - LINEに送る
  - SMSへ送らない
- 飲食店側が注文をキャンセルした場合で、クレジットカード決済もしくは受け取り払いの場合
  - LINEに送る
  - SMSへ送る
- 飲食店側が注文を変更した場合で、クレジットカード決済もしくは受け取り払いの場合
  - LINEに送る
  - SMSへ送る
- 飲食店側がクレジットカード決済をキャンセルした場合
  - LINEに送る
  - SMSへ送る

## Note

### お客さんが注文状態を把握する方法
- 注文画面を開きっぱなしにする
- お客さん自身でLINEのお友達追加をおこなう
- SMSへは、コストがかかるため、キャンセルと注文の変更時だけ送られる

### 不具合報告時に必要な情報
- 決済方法
- 注文状態
- 飲食店側の操作
